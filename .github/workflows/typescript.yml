name: Node CI

on: push

jobs:
  typescript-checks:
    uses: ./.github/workflows/typescript-checks.yml
    secrets:
      GITHUB_NPM_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}

  release:
    uses: ./.github/workflows/release.yml
    needs: [typescript-checks]
    secrets:
      GITHUB_NPM_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    with:
      artifact-name: ${{ needs.typescript-checks.outputs.build-artifact-name }}
      artifact-path: ${{ needs.typescript-checks.outputs.build-artifact-path }}
